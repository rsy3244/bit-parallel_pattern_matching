\documentclass[dvipdfmx, beamer]{standalone}
\ifstandalone
	\input{preamble.tex}
\fi
\usepgfmodule{oo}
\ifdefined\Node
\else
\pgfooclass{Node}{
	\attribute label=test;
	\attribute color=0;
	\attribute position=0,0;

	\method Node(#1,#2){
		\pgfooset{label}{#1}
		\pgfooset{position}{#2}
	}

	\method change color(){
		\pgfmathparse{not(\pgfoovalueof{color})}
		\pgfooset{color}{\pgfmathresult}
	}

	\method apply(){
		\pgfmathifthenelse{\pgfoovalueof{color}}{%
			"\node [draw, fill=red!10] at (\pgfoovalueof{position}) {\pgfoovalueof{label}};"%
		}{%
			"\node [draw, fill=blue!10] at (\pgfoovalueof{position}) {\pgfoovalueof{label}};"%
		}
		\pgfmathresult
	}
}

\pgfooclass{stamp}{
	\attribute text;
	\attribute rotation angle=20;

	\method stamp(#1){
		\pgfooset{text}{#1}
	}
	\method apply(#1,#2){
		\node [rotate=\pgfoovalueof{rotation angle},font=\huge] at (#1,#2) {\pgfoovalueof{text}};
	}
	\method set rotation(#1){
		\pgfooset{rotation angle}{#1}
	}
}
\fi

\begin{document}

\begin{frame}
	\begin{tikzpicture}
		\pgfoonew \firststamp=new stamp(text);
		\firststamp.apply(1,2);
		\firststamp.set rotation(45);
		\firststamp.apply(4,2);
		\pgfoonew \firstnode=new Node(hoge,5,5);
		\firstnode.apply();
		\firstnode.change color();
		\firstnode.apply();
		\node [draw] at (0,0) {txt};
	\end{tikzpicture}
\end{frame}

\end{document}
